/* vJunos1 Configuration
 * =======================
 * AS65002 - BGP peer with FRR1 (AS65001)
 */

system {
    host-name vjunos1;
    root-authentication {
        encrypted-password "$6$placeholder$placeholder";
    }
    services {
        ssh;
        netconf {
            ssh;
        }
    }
}

interfaces {
    eth1 {
        unit 0 {
            family inet {
                address 192.0.2.2/30;
            }
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 10.0.0.2/32;
            }
        }
    }
}

routing-options {
    router-id 10.0.0.2;
    autonomous-system 65002;
}

protocols {
    bgp {
        group ebgp-frr {
            type external;
            peer-as 65001;
            neighbor 192.0.2.1;
            export advertise-loopback;
        }
    }
}

policy-options {
    policy-statement advertise-loopback {
        term loopback {
            from {
                protocol direct;
                route-filter 10.0.0.2/32 exact;
            }
            then accept;
        }
        term default {
            then reject;
        }
    }
}
